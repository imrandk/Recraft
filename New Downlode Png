javascript:!function(){const e=document.createElement("div");Object.assign(e.style,{position:"absolute",width:"300px",height:"200px",backgroundColor:"white",border:"2px solid #ccc",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",top:"50px",left:"50px",resize:"both",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"100%",height:"30px",backgroundColor:"#007bff",color:"white",textAlign:"center",lineHeight:"30px",cursor:"move"}),t.textContent="Drag Me",e.appendChild(t);const r=document.createElement("textarea");r.id="promptBoxTextarea",Object.assign(r.style,{width:"100%",height:"calc(100% - 30px)",border:"none",outline:"none",resize:"none",padding:"10px",fontSize:"16px"}),r.placeholder="Write your prompt here (e.g., Prompt: Your text)",e.appendChild(r),document.body.appendChild(e);let o,n,c=!1;const a=t=>{c&&(e.style.left=t.clientX-o+"px",e.style.top=t.clientY-n+"px")};t.addEventListener("mousedown",(t=>{c=!0;const r=e.getBoundingClientRect();o=t.clientX-r.left,n=t.clientY-r.top,document.addEventListener("mousemove",a)})),document.addEventListener("mouseup",(()=>{c=!1,document.removeEventListener("mousemove",a)}));const i=e=>new Promise((t=>setTimeout(t,e))),s='button[data-testid="recraft-button"]',l=()=>{const e=document.querySelector(s);return e&&e.click(),Promise.resolve()},u=(e=1e3,t=15)=>new Promise((r=>{let o=0;const n=setInterval((async()=>{o>=t?(clearInterval(n),r(!1)):await(()=>{const e=document.querySelector(s);return Promise.resolve(e&&"Recraft"===e.textContent.trim())})()&&(clearInterval(n),r(!0)),o++}),e)})),m=()=>{const e=document.querySelector('[data-testid="recraft-topbar-export"] > [data-testid="toggler"]');return e&&e.click(),Promise.resolve()},x=()=>{const e=document.querySelector('button.c-xHEva:nth-child(2)');return e&&e.offsetParent!==null&&!e.disabled&&e.click(),Promise.resolve()};let d=!1;const p=()=>{const e=document.querySelector("button.c-bZNrxE.c-cfmRqm.c-cfmRqm-djDtlJ-stretch-false.c-cfmRqm-hdlaDN-size-m.c-cfmRqm-vSIUM-mode-secondary");return!(!e||"Cancel"!==e.textContent.trim()||(e.click(),d=!0,0))},f=()=>{const e=document.querySelector("div.c-kWXNTX.c-kWXNTX-ijbiex-visible-true");return e&&(e.textContent.includes("Sorry, we canâ€™t recraft as fast as you click")||e.textContent.includes("Oops! Something went wrong, please try again later"))},b=async e=>{const t=document.querySelector('textarea[data-testid="recraft-textarea"]');if(!t)return!1;let o=e.trim().replace("Prompt: ","").trim();var n,c;t.focus(),n=t,c=o,Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value").set.call(n,c),n.dispatchEvent(new Event("input",{bubbles:!0})),r.value=r.value.replace(e,"").trim()||"";for(let e=0;e<10;e++){p()&&await i(800),await i(1500),await l();let t=!1;for(let r=0;r<3;r++){if(f()){t=!0;break}await i(1500)}if(!t)return await i(800),await u(),await i(800),await m(),await i(800),await(document.querySelectorAll('button[data-testid="export-button"]').forEach((e)=>{if(e.textContent.trim()==="Export"&&e.offsetParent!==null&&!e.disabled){e.click()}})),Promise.resolve(),await i(2000),await x(),await i(800),await m(),await i(800),await(document.querySelectorAll('button[data-testid="export-button"]').forEach((e)=>{if(e.textContent.trim()==="Export"&&e.offsetParent!==null&&!e.disabled){e.click()}})),Promise.resolve(),!0;if(t)return await i(1500),await l(),!1}return!0};let v=!1;r.addEventListener("input",(async()=>{if(!v){for(v=!0;;){let e=r.value.trim();if(!e)break;const t=e.split("\n").filter((e=>e.trim().startsWith("Prompt: ")));if(0===t.length)break;const o=t[0];if(await b(o))continue;break}v=!1}})),setInterval((()=>{const e=r.value.trim(),t=e.split("\n").filter((e=>e.trim().startsWith("Prompt: ")));!d||e&&0!==t.length||(()=>{const e=document.querySelector('img[data-testid="topbar-avatar"]')?.closest('button,[role="button"],div');["pointerdown","mousedown","mouseup","click"].forEach((t=>e?.dispatchEvent(new MouseEvent(t,{bubbles:!0})))),setTimeout((()=>{const e=document.querySelector('[data-testid="user-logout"]')||document.querySelector(".c-gRsTRw");e&&e.click()}),1e3)})()}),12e4)}();
