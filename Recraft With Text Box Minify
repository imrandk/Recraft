javascript:(()=>{const b=document.createElement("div");Object.assign(b.style,{position:"absolute",width:"300px",height:"200px",backgroundColor:"white",border:"2px solid #ccc",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",top:"50px",left:"50px",resize:"both",overflow:"auto"});const h=document.createElement("div");Object.assign(h.style,{width:"100%",height:"30px",backgroundColor:"#007bff",color:"white",textAlign:"center",lineHeight:"30px",cursor:"move"}),h.textContent="Drag Me",b.appendChild(h);const t=document.createElement("textarea");t.id="promptBoxTextarea",Object.assign(t.style,{width:"100%",height:"calc(100% - 30px)",border:"none",outline:"none",resize:"none",padding:"10px",fontSize:"16px"}),t.placeholder="Enter prompts in format:\nPrompt: Your prompt text",b.appendChild(t),document.body.appendChild(b);let d=!1,x,y;h.addEventListener("mousedown",e=>{d=!0;const r=b.getBoundingClientRect();x=e.clientX-r.left,y=e.clientY-r.top}),document.addEventListener("mousemove",e=>{d&&(b.style.left=`${e.clientX-x}px`,b.style.top=`${e.clientY-y}px`)}),document.addEventListener("mouseup",()=>d=!1);const r=/Prompt:\s*(.+?)(?=\n|$)/g;let p=[];function s(e,v){try{Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value").set.call(e,v),e.dispatchEvent(new Event("input",{bubbles:!0}))}catch{}}const c=s=>new Promise(r=>{const b=document.querySelector(s);b?(b.click(),r(!0)):r(!1)}),w=(s,t)=>new Promise(r=>{const o=new MutationObserver(()=>{const e=document.querySelector(s);if(e&&e.textContent.trim()===t){o.disconnect(),r(!0)}});o.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0});setTimeout(()=>{o.disconnect(),r(!1)},3e4)}),l=(s,t=5e3)=>new Promise(async r=>{const n=Date.now();while(Date.now()-n<t){const e=document.querySelectorAll(s);for(const b of e)if(b.textContent.trim()==="SVG"){b.click(),r(!0);return}await new Promise(r=>setTimeout(r,100))}r(!1)}),dly=ms=>new Promise(r=>setTimeout(r,ms)),n=()=>new Promise(r=>{const i=document.getElementById("promptBoxTextarea");if(p.length&&i){const v=p.shift();i.value=i.value.replace(new RegExp(`^\\s*Prompt:\\s*${v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\s*(?:\\r?\\n)?`,"m"),"");const e=document.querySelector('textarea[data-testid="recraft-textarea"]');e?(e.focus(),s(e,v),r(v)):r(null)}else r(null)}),u=async()=>{while(p.length){const v=await n();if(!v)break;if(!await c('button[data-testid="recraft-button"]'))continue;if(!await w('button[data-testid="recraft-button"]',"Recraft"))continue;await c('[data-testid="recraft-topbar-export"] > [data-testid="toggler"]'),await dly(500);const s1="button[class*='c-bZNrxE'][class*='mode-primary']";if(await l(s1))await dly(500);await c("button.c-xHEva:nth-child(2)"),await dly(500),await c('[data-testid="recraft-topbar-export"] > [data-testid="toggler"]'),await dly(500);if(await l(s1))await dly(500)}},k=()=>{const i=document.getElementById("promptBoxTextarea");if(!i||!i.value.trim())return!1;p=[...i.value.matchAll(r)].map(x=>x[1]);if(p.length){u();return!0}return!1};k()||t.addEventListener("input",()=>{k()&&t.removeEventListener("input",this)})})();
