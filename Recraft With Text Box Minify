javascript:(()=>{const box=document.createElement("div");Object.assign(box.style,{position:"absolute",width:"300px",height:"200px",backgroundColor:"white",border:"2px solid #ccc",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",top:"50px",left:"50px",resize:"both",overflow:"auto"});const header=document.createElement("div");Object.assign(header.style,{width:"100%",height:"30px",backgroundColor:"#007bff",color:"white",textAlign:"center",lineHeight:"30px",cursor:"move"}),header.textContent="Drag Me",box.appendChild(header);const ta=document.createElement("textarea");ta.id="promptBoxTextarea",Object.assign(ta.style,{width:"100%",height:"calc(100% - 30px)",border:"none",outline:"none",resize:"none",padding:"10px",fontSize:"16px"}),ta.placeholder="Enter prompts in format:\nPrompt: Your prompt text",box.appendChild(ta),document.body.appendChild(box);let isDragging=!1,offsetX,offsetY;header.addEventListener("mousedown",e=>{isDragging=!0;const t=box.getBoundingClientRect();offsetX=e.clientX-t.left,offsetY=e.clientY-t.top}),document.addEventListener("mousemove",e=>{isDragging&&(box.style.left=`${e.clientX-offsetX}px`,box.style.top=`${e.clientY-offsetY}px`)}),document.addEventListener("mouseup",()=>isDragging=!1),(()=>{const e=/Prompt:\s*(.+?)(?=\n|$)/g;let t=[];const n=(e,t)=>{Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value").set.call(e,t),e.dispatchEvent(new Event("input",{bubbles:!0}))},r=()=>new Promise(e=>{const r=document.getElementById("promptBoxTextarea");if(t.length&&r){const a=t.shift(),s=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(`^\\s*Prompt:\\s*${s}\\s*(?:\\r?\\n)?`,"m");r.value=r.value.replace(o,"");const l=document.querySelector('textarea[data-testid="recraft-textarea"]');l&&(l.focus(),n(l,a),l.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout(()=>e(a),100))}else e(null)}),a=e=>new Promise(t=>setTimeout(t,e)),s=e=>{const t=document.querySelector(e);return t&&t.click(),Promise.resolve()},o=async(e,t=5e3)=>{const n=Date.now();for(;Date.now()-n<t;){const t=document.querySelectorAll(e);for(const e of t)if("SVG"===e.textContent.trim())return e.click(),Promise.resolve();await a(100)}return Promise.resolve()},l=()=>Promise.resolve("Recraft"===document.querySelector('button[data-testid="recraft-button"]')?.textContent.trim()),c=(e=1e3,t=30)=>new Promise(n=>{let r=0;const a=setInterval(async()=>{r++>=t?(clearInterval(a),n(!1)):await l()&&(clearInterval(a),n(!0))},e)}),i=async()=>{while(t.length){const e=await r();if(!e)break;const n=document.querySelector('textarea[data-testid="recraft-textarea"]');if(!n)continue;n.focus(),n.value=e,n.dispatchEvent(new Event("input",{bubbles:!0})),await a(1e3),await s('button[data-testid="recraft-button"]'),await a(1e3);if(!await c())continue;await a(1e3),await s('[data-testid="recraft-topbar-export"] > [data-testid="toggler"]'),await a(1e3),await o("button.c-bZNrxE.c-cfmRqm.c-cfmRqm-fGHEql-stretch-true.c-cfmRqm-kumaHe-size-s.c-cfmRqm-ffVEBR-mode-primary.c-nSdQa"),await a(1e3),await s("button.c-xHEva:nth-child(2)"),await a(1e3),await s('[data-testid="recraft-topbar-export"] > [data-testid="toggler"]'),await a(1e3),await o("button.c-bZNrxE.c-cfmRqm.c-cfmRqm-fGHEql-stretch-true.c-cfmRqm-kumaHe-size-s.c-cfmRqm-ffVEBR-mode-primary.c-nSdQa"),await a(2e3)}},u=()=>{const n=document.getElementById("promptBoxTextarea");if(!n||n.value.trim()==="")return!1;const r=[...n.value.matchAll(e)];return t=r.map(e=>e[1]),!!t.length&&i(),!0};u()||ta.addEventListener("input",()=>{u()&&ta.removeEventListener("input",this)})})()})();
